@model Trip


<div>@Model.TripName</div>
<div>
    <form method="post" action="/trip/deletetrip/@Model.Id">
        <input type="submit" value="Delete Trip" />
    </form>
    <p>
        <label for="items">Choose item to add:</label><br />
        <select id='eeeee' name="idItem">
            <option disabled>Item</option>
            @foreach(Item i in ViewBag.ListOtItems)
            {
            <option value="@i.Id">@i.ItemName</option>
            }

        </select>
        <button onclick="addingNewItem()"> Add</button>
    </p>
</div>

<div>
    @foreach (var i in Model.ItemsToTrip)
    {
        @i.Item.ItemName
            <button onclick="deleteItem(@i.Id)"> Delete</button>
     }
    </div>


<script>
function deleteItem(x) {
        var xhttp = new XMLHttpRequest();
        xhttp.open('POST', '/trip/deleteitemfromtrip/'+x, false);
        xhttp.send();
        window.location.reload();
        }

var idItem;

function addingNewItem(){
        var e = document.getElementById("eeeee");
        idItem = e.value;
        AJAXCalltoAddItem(idItem);
}
function AJAXCalltoAddItem(idItem){
        var xhttp = new XMLHttpRequest();
        var IdTrip = @Model.Id;
        xhttp.open('POST', '/trip/addingItemToExistingTrip?idItem='+idItem + '&IdTrip=' + IdTrip.toString(), false);
        xhttp.send();
        window.location.reload();
}

</script>